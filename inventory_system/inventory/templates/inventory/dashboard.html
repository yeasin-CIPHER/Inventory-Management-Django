{% extends 'inventory/base.html' %}

{% block title %}Dashboard - Inventory System{% endblock %}

{% block content %}
<div class="dashboard">
    <h2>Dashboard</h2>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon blue">üì¶</div>
            <div class="stat-info">
                <h3>{{ total_products }}</h3>
                <p>Total Products</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon orange">‚ö†Ô∏è</div>
            <div class="stat-info">
                <h3>{{ low_stock_count }}</h3>
                <p>Low Stock Items</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon green">üí∞</div>
            <div class="stat-info">
                <h3>${{ total_inventory_value|floatformat:2 }}</h3>
                <p>Total Inventory Value</p>
            </div>
        </div>
    </div>

    {% if low_stock_products %}
    <div class="section">
        <h3>‚ö†Ô∏è Low Stock Alerts</h3>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>SKU</th>
                        <th>Product Name</th>
                        <th>Category</th>
                        <th>Current Stock</th>
                        <th>Min Stock</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in low_stock_products %}
                    <tr class="low-stock-row">
                        <td><strong>{{ product.sku }}</strong></td>
                        <td>{{ product.name }}</td>
                        <td>{{ product.category }}</td>
                        <td><span class="badge badge-danger">{{ product.quantity }}</span></td>
                        <td>{{ product.min_stock_level }}</td>
                        <td>
                            <a href="{% url 'product_edit' product.pk %}" class="btn-small btn-primary">Restock</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}

    <div class="section">
        <h3>üìä Recent Transactions</h3>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Product</th>
                        <th>Type</th>
                        <th>Quantity</th>
                        <th>User</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in recent_transactions %}
                    <tr>
                        <td>{{ transaction.date|date:"Y-m-d H:i" }}</td>
                        <td>{{ transaction.product.name }}</td>
                        <td>
                            {% if transaction.transaction_type == 'IN' %}
                            <span class="badge badge-success">Stock In</span>
                            {% else %}
                            <span class="badge badge-warning">Stock Out</span>
                            {% endif %}
                        </td>
                        <td>{{ transaction.quantity }}</td>
                        <td>{{ transaction.user.username }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">No transactions yet</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

